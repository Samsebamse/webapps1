@model List<Webapps1.Models.Rute>

@{
    ViewBag.Title = "Liste av alle Ruter";
}

<!-- TRENGER KANSKJE Å IMPORTE FLER JQUERY FILER -->
<script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.2.1.js"></script>


<script type="text/javascript">
    function hentAlleRuter() {
        $.ajax({
            url: '/Home/HentAlleRuter',
            type: 'GET',
            dataType: 'json',
            success: function (alleRuter) {
                visAlleRuter(alleRuter);
            },
            error: function (xhr, status, error) {
                var err = eval("(" + xhr.responseText + ")");
                alert(err.Message);
            },
        });

    }
    function hentValgteRuter() {
        $.ajax({
            url: '/Home/HentValgteRuter',
            type: 'GET',
            dataType: 'json',
            data: {
                fra: $("fra").val(),
                til: $("til").val()
            },
            success: function (valgteRuter) {
                visAlleRuter(valgteRuter);
            },
            error: function (xhr, status, error) {
                var err = eval("(" + xhr.responseText + ")");
                alert(err.Message);
            },
        });

    }
 
    function visAlleRuter(valgteRuter) {
        var utString = "";
        for (var i in valgteRuter) {
            utString +=
                "<tr>" +
                "<td>" +    ruter[i].Fra +         "</td>"     +
                "<td>" +    ruter[i].Til +         "</td>"     +
                "<td>" +    ruter[i].Avgang +      "</td>"     +
                "<td>" +    ruter[i].Ankomst +     "</td>"     +
                "<td>" +    ruter[i].Pris +        "</td>"     +
                "</tr>";
        }
        $("#serverData").append(utString);
    }


</script>

    <h2>ListeRuter</h2>

    <p>
        @Html.ActionLink("Create New", "Create")
    </p>

<div class="form-group row">
    <label for="example-text-input" class="col-2 col-form-label">Fra</label>
    <div class="col-10">
        <input class="form-control" type="text" id="fra">
    </div>
</div>
<div class="form-group row">
    <label for="example-search-input" class="col-2 col-form-label">Til</label>
    <div class="col-10">
        <input class="form-control" type="text"  id="til">
    </div>
</div>
        <table class="table" id="serverData">
            <tr>
                <th>
                    Fra
                </th>
                <th>
                    Til
                </th>
                <th>
                    Avgang
                </th>
                <th>
                    Ankomst
                </th>
                <th>
                    Pris
                </th>
                <th></th>
            </tr>
        </table>

        <table>
            @*@foreach (var item in Model) {
                    <tr>
                        <td>
                            @item.Fra
                        </td>
                        <td>
                            @item.Til
                        </td>
                        <td>
                            @item.Avgang
                        </td>
                        <td>
                            @item.Ankomst
                        </td>
                        <td>
                            @item.Pris
                        </td>
                        <td>
                            @Html.ActionLink("Edit", "Edit", new { id=item.RuteId }) |
                            @Html.ActionLink("Details", "Details", new { id=item.RuteId }) |
                            @Html.ActionLink("Delete", "Delete", new { id=item.RuteId })
                        </td>
                    </tr>
                }*@
        </table>
        <button type="button" onclick="hentAlleRuter()"> Alle reiser </button><br />
        <button type="button" onclick="hentValgteRuter()"> Søk valgte reiser</button>

        <br />
        <div>
            @Html.ActionLink("Liste alle flyplasser", "Index")
        </div>

        <div>
            @Html.ActionLink("Bestill billett", "NyBillett")
        </div>
